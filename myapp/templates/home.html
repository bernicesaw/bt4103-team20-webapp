{% extends 'base.html' %}
{% block title %}Career Path Navigator for Developers{% endblock %}
{% block content %}
  <div class="container py-4">
    <div class="row mb-4">
      <div class="col-12">
  <section class="p-4 p-md-5 mb-4 text-white rounded animate-on-scroll" style="background: linear-gradient(90deg, #0d6efd 0%, #6610f2 100%);">
          <div class="container-fluid py-4">
            <div class="row align-items-center">
              <div class="col-md-7">
                <h1 class="display-4 fw-bold">Career Path Navigator for Developers</h1>
                <p class="lead">Explore developer-focused salary benchmarks, skill transition maps, personalised course recommendations, and an AI assistant tuned for developer careers.</p>
                <div class="mt-3">
                  <a class="btn btn-light btn-lg me-2" href="/dashboard/" role="button">Open Dashboard</a>
                  <a class="btn btn-outline-light btn-lg" href="/askai/" role="button">Chat with AskAI</a>
                </div>
              </div>
              <div class="col-md-5 d-none d-md-block text-end">
                <!-- Small illustrative mini-network (static canvas) -->
                <div class="bg-white rounded shadow" style="display:inline-block; padding:12px; max-width:320px;">
                  <canvas id="heroMiniNetwork" width="280" height="160" aria-hidden="true"></canvas>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Dashboard</h5>
            <p class="card-text text-muted">High-level trends, salary and experience analytics across roles and time. Great for spotting market shifts and salary benchmarks.</p>
            <div class="mt-auto">
              <a class="btn btn-primary" href="/dashboard/">Open Dashboard</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Skill Adjacency Graph</h5>
            <p class="card-text text-muted">Interactive skill graph that shows how skills connect and which skills commonly appear together for different roles.</p>
            <div class="mt-auto">
              <a class="btn btn-primary" href="/skillgraph/">View Skill Graph</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Course Recommendation</h5>
            <p class="card-text text-muted">Get course suggestions tailored to a skill or job title using our course embeddings and recommender chain.</p>
            <div class="mt-auto">
              <a class="btn btn-primary" href="/askai/">Open Course Recommender (AskAI)</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="card mt-4 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">AskAI — Career Assistant</h5>
            <p class="card-text text-muted">Chat with the AI to ask about career transitions, recommended skills, or to request a Cypher query against the career graph. The agent can also return course suggestions.</p>
            <a class="btn btn-outline-secondary" href="/askai/">Chat with AskAI</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Testimonials carousel -->
    <div class="row g-4 mt-4">
      <div class="col-12">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">What Developers Say</h5>
            <p class="text-muted small mb-3">Real-world feedback from users who used the navigator to plan their next move.</p>

            <div id="testimonialsCarousel" class="carousel slide animate-on-scroll" data-bs-ride="carousel">
              <div class="carousel-indicators">
                <button type="button" data-bs-target="#testimonialsCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#testimonialsCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#testimonialsCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
              </div>

              <div class="carousel-inner">
                <div class="carousel-item active">
                  <div class="row g-3">
                    <div class="col-md-4">
                      <div class="p-3 border rounded h-100 testimonial-card">
                        <div class="d-flex align-items-center mb-2">
                          <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center me-2" style="width:44px;height:44px;font-weight:600;">AS</div>
                          <div>
                            <strong>Alex S.</strong>
                            <div class="text-muted small">Senior Frontend Engineer</div>
                          </div>
                        </div>
                        <p class="mb-0">"The skill adjacency graph helped me identify exactly which backend skills to learn next — I moved from frontend to full‑stack in 6 months."</p>
                      </div>
                    </div>

                    <div class="col-md-4">
                      <div class="p-3 border rounded h-100 testimonial-card">
                        <div class="d-flex align-items-center mb-2">
                          <div class="rounded-circle bg-success text-white d-inline-flex align-items-center justify-content-center me-2" style="width:44px;height:44px;font-weight:600;">MJ</div>
                          <div>
                            <strong>Maria J.</strong>
                            <div class="text-muted small">Data Engineer</div>
                          </div>
                        </div>
                        <p class="mb-0">"Course suggestions were spot-on for my goals — short, practical, and helpful for interview prep."</p>
                      </div>
                    </div>

                    <div class="col-md-4">
                      <div class="p-3 border rounded h-100 testimonial-card">
                        <div class="d-flex align-items-center mb-2">
                          <div class="rounded-circle bg-warning text-dark d-inline-flex align-items-center justify-content-center me-2" style="width:44px;height:44px;font-weight:600;">RK</div>
                          <div>
                            <strong>Rohan K.</strong>
                            <div class="text-muted small">DevOps Engineer</div>
                          </div>
                        </div>
                        <p class="mb-0">"The dashboard's market trends helped me benchmark salaries and negotiate a raise with confidence."</p>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="carousel-item">
                  <div class="row g-3">
                    <div class="col-md-4">
                      <div class="p-3 border rounded h-100 testimonial-card">
                        <div class="d-flex align-items-center mb-2">
                          <div class="rounded-circle bg-info text-white d-inline-flex align-items-center justify-content-center me-2" style="width:44px;height:44px;font-weight:600;">LS</div>
                          <div>
                            <strong>Lin S.</strong>
                            <div class="text-muted small">Backend Engineer</div>
                          </div>
                        </div>
                        <p class="mb-0">"I used the navigator to structure my learning path — the course picks were concise and practical."</p>
                      </div>
                    </div>

                    <div class="col-md-4">
                      <div class="p-3 border rounded h-100 testimonial-card">
                        <div class="d-flex align-items-center mb-2">
                          <div class="rounded-circle bg-secondary text-white d-inline-flex align-items-center justify-content-center me-2" style="width:44px;height:44px;font-weight:600;">VT</div>
                          <div>
                            <strong>Vik T.</strong>
                            <div class="text-muted small">Full-Stack Developer</div>
                          </div>
                        </div>
                        <p class="mb-0">"Great resource for interview prep and for finding adjacent skills to broaden my role."</p>
                      </div>
                    </div>

                    <div class="col-md-4">
                      <div class="p-3 border rounded h-100 testimonial-card">
                        <div class="d-flex align-items-center mb-2">
                          <div class="rounded-circle bg-dark text-white d-inline-flex align-items-center justify-content-center me-2" style="width:44px;height:44px;font-weight:600;">EZ</div>
                          <div>
                            <strong>Emma Z.</strong>
                            <div class="text-muted small">Platform Engineer</div>
                          </div>
                        </div>
                        <p class="mb-0">"The visual career maps made it much easier to explain my promotion case to my manager."</p>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="carousel-item">
                  <div class="row g-3">
                    <div class="col-md-4">
                      <div class="p-3 border rounded h-100 testimonial-card">
                        <div class="d-flex align-items-center mb-2">
                          <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center me-2" style="width:44px;height:44px;font-weight:600;">AN</div>
                          <div>
                            <strong>Anoop N.</strong>
                            <div class="text-muted small">Security Engineer</div>
                          </div>
                        </div>
                        <p class="mb-0">"I loved the course filtering by relevance — saved me time finding practical material."</p>
                      </div>
                    </div>

                    <div class="col-md-4">
                      <div class="p-3 border rounded h-100 testimonial-card">
                        <div class="d-flex align-items-center mb-2">
                          <div class="rounded-circle bg-success text-white d-inline-flex align-items-center justify-content-center me-2" style="width:44px;height:44px;font-weight:600;">TP</div>
                          <div>
                            <strong>Tara P.</strong>
                            <div class="text-muted small">ML Engineer</div>
                          </div>
                        </div>
                        <p class="mb-0">"The AI assistant gave clear next steps and suggested courses that matched my background."</p>
                      </div>
                    </div>

                    <div class="col-md-4">
                      <div class="p-3 border rounded h-100 testimonial-card">
                        <div class="d-flex align-items-center mb-2">
                          <div class="rounded-circle bg-warning text-dark d-inline-flex align-items-center justify-content-center me-2" style="width:44px;height:44px;font-weight:600;">SR</div>
                          <div>
                            <strong>Sofia R.</strong>
                            <div class="text-muted small">Data Scientist</div>
                          </div>
                        </div>
                        <p class="mb-0">"Useful for planning the skills I need to move to a senior data role."</p>
                      </div>
                    </div>
                  </div>
                </div>

              </div>

              <button class="carousel-control-prev" type="button" data-bs-target="#testimonialsCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#testimonialsCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>

            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Two-column visualisations -->
    <div class="row g-4 mt-4" data-aos="fade-up" data-aos-delay="120">
      <div class="col-lg-6" style="min-height:260px;" data-aos="fade-up" data-aos-delay="160">
        <div class="card shadow-sm h-100">
          <div class="card-body d-flex flex-column">
            <h6 class="card-title">Developer Market Trends</h6>
            <p class="text-muted small">Example: median salaries over time for software engineering roles.</p>
            <div class="flex-grow-1">
              <canvas id="chartLandscape" width="400" height="220" aria-label="Developer trends chart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-6" style="min-height:260px;" data-aos="fade-up" data-aos-delay="220">
        <div class="card shadow-sm h-100">
          <div class="card-body d-flex flex-column">
            <h6 class="card-title">Trending Courses</h6>
            <p class="text-muted small">Current trending courses for developers.</p>
            <div class="flex-grow-1">
              <canvas id="chartCourses" width="400" height="220" aria-label="Course recommendations chart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Skill adjacency mini-network -->
    <div class="row g-4 mt-4" data-aos="fade-up" data-aos-delay="200">
      <div class="col-12">
        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="card-title">Skill Adjacency (Sample)</h6>
            <div id="skillNetwork" style="height:360px;"></div>
            <p class="small text-muted mt-2">Interactive mini-network showing simplified skill relationships for developer roles.</p>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Chart.js and vis-network (CDN) + sample data scripts -->
  <!-- AOS (Animate On Scroll) -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/vis-network@9.1.2/dist/vis-network.min.js"></script>
  <script>
    // Landscape trends sample (line)
    try {
      // Draw a small static mini-network inside the hero banner canvas (non-interactive)
      const heroCanvas = document.getElementById('heroMiniNetwork');
      if (heroCanvas && heroCanvas.getContext) {
        const hctx = heroCanvas.getContext('2d');
        // background
        hctx.fillStyle = '#ffffff';
        hctx.fillRect(0, 0, heroCanvas.width, heroCanvas.height);
        // sample nodes
        const pts = [{x:40,y:80},{x:110,y:40},{x:190,y:80},{x:150,y:120}];
        hctx.strokeStyle = 'rgba(13,110,253,0.35)';
        hctx.lineWidth = 2;
        hctx.beginPath();
        hctx.moveTo(pts[0].x, pts[0].y);
        for (let i = 1; i < pts.length; i++) { hctx.lineTo(pts[i].x, pts[i].y); }
        hctx.stroke();
        hctx.fillStyle = '#0d6efd';
        for (const p of pts) { hctx.beginPath(); hctx.arc(p.x, p.y, 7, 0, Math.PI*2); hctx.fill(); }
      }

      const ctxL = document.getElementById('chartLandscape').getContext('2d');
      new Chart(ctxL, {
        type: 'line',
        data: {
          labels: ['2019','2020','2021','2022','2023','2024'],
          datasets: [{
            label: 'Median salary (USD)',
            data: [105000,110000,120204,130000,140000,188000],
            borderColor: '#2563eb',
            backgroundColor: 'rgba(37,99,235,0.08)',
            tension: 0.3
          }]
        },
        options: { responsive: true, maintainAspectRatio: false }
      });

      const ctxC = document.getElementById('chartCourses').getContext('2d');
      new Chart(ctxC, {
        type: 'bar',
        data: {
          labels: ['AI/ML','Cloud','Full-Stack','DevOps','Security'],
          datasets: [{
            label: 'Trending Courses',
            data: [12,18,22,9,6],
            backgroundColor: ['#0ea5a4','#60a5fa','#f97316','#34d399','#fb7185']
          }]
        },
        options: { responsive: true, maintainAspectRatio: false }
      });

      // vis-network mini graph
      const nodes = new vis.DataSet([
        { id: 1, label: 'HTML' },
        { id: 2, label: 'CSS' },
        { id: 3, label: 'JavaScript' },
        { id: 4, label: 'React' },
        { id: 5, label: 'Node.js' },
        { id: 6, label: 'Docker' },
        { id: 7, label: 'Kubernetes' }
      ]);
      const edges = new vis.DataSet([
        { from: 1, to: 3 }, { from: 2, to: 3 }, { from: 3, to: 4 }, { from: 4, to: 5 }, { from: 5, to: 6 }, { from: 6, to: 7 }
      ]);
      const container = document.getElementById('skillNetwork');
      const data = { nodes: nodes, edges: edges };
      const options = { physics: { stabilization: true }, interaction: { hover: true }, nodes: { shape: 'dot', size: 16 } };
      new vis.Network(container, data, options);
    } catch (e) {
      console.warn('Homepage visuals failed to render', e);
    }
  </script>
  <style>
    /* Simple scroll-reveal animation */
    .animate-on-scroll { opacity: 0; transform: translateY(12px); transition: opacity .6s ease, transform .6s ease; }
    .animate-on-scroll.in-view { opacity: 1; transform: translateY(0); }

    /* Slight lift on testimonial hover */
    .testimonial-card { transition: transform .28s ease, box-shadow .28s ease; }
    .testimonial-card:hover { transform: translateY(-6px); box-shadow: 0 8px 20px rgba(13,110,253,0.08); }

    /* Soft fade for hero CTA buttons */
    .btn-lg { transition: transform .16s ease, box-shadow .16s ease; }
    .btn-lg:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(0,0,0,0.08); }
  /* Position carousel arrow icons slightly outside the carousel and make them smaller */
  .carousel-control-prev, .carousel-control-next { width: 44px; height: 44px; top: 50%; transform: translateY(-50%); }
  .carousel-control-prev { left: -28px; }
  .carousel-control-next { right: -28px; }
  .carousel-control-prev-icon, .carousel-control-next-icon { background-size: 22px 22px; width: 40px; height: 40px; border-radius: 999px; background-color: rgba(0,0,0,0.35); }
  .carousel-control-prev:hover .carousel-control-prev-icon, .carousel-control-next:hover .carousel-control-next-icon { background-color: rgba(0,0,0,0.55); }
  </style>

  <script>
    // IntersectionObserver to add .in-view when elements scroll into viewport
    document.addEventListener('DOMContentLoaded', function () {
      try {
        const io = new IntersectionObserver((entries) => {
          entries.forEach(e => {
            if (e.isIntersecting) {
              e.target.classList.add('in-view');
              // unobserve once visible
              io.unobserve(e.target);
            }
          });
        }, { threshold: 0.12 });

            document.querySelectorAll('.animate-on-scroll').forEach(el => io.observe(el));
            // Initialize AOS if available for richer animations
            if (window.AOS && typeof window.AOS.init === 'function') {
              window.AOS.init({ once: true, duration: 800, easing: 'ease-out-cubic' });
            }
      } catch (ex) {
        // IntersectionObserver not supported; reveal immediately
        document.querySelectorAll('.animate-on-scroll').forEach(el => el.classList.add('in-view'));
      }
    });
  </script>

{% endblock %}
